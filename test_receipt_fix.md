# 申請管理の領収書列修正 - テスト手順

## 実装した修正内容
1. ✅ expenses/invoice_paymentsテーブルにreceipt_imageカラム追加のマイグレーション作成
2. ✅ TypeScript型定義更新（receipt_imageフィールド追加）
3. ✅ 申請管理画面の領収書列表示ロジック改善
   - アップロード済みの場合：緑色の✓マーク付きボタン表示
   - 未アップロードの場合：グレーの「-」表示
   - クリックで領収書を新しいタブで表示

## 現在の問題と必要な作業
現時点では、**フロントエンドでファイルアップロードしても実際にサーバーに保存されていない**ため、
マイグレーション後でも領収書列は「-」が表示されます。

### 今後必要な作業
1. **Supabase Storageの設定** - 画像ファイル保存用
2. **ファイルアップロード処理の実装** - フロントエンドから画像をサーバーに送信
3. **API修正** - アップロードされた画像をSupabase Storageに保存し、URLをDBに記録

## テスト手順

### 1. マイグレーション実行
Supabaseで以下のSQLを実行：
```sql
-- migrate_add_receipt_image_to_expenses.sql の内容を実行
```

### 2. 申請管理画面の確認
1. http://localhost:3003/admin/approvals にアクセス
2. 申請一覧の「領収書」列を確認
3. **期待される結果**：
   - 現時点では全て「-」が表示される（ファイルアップロード機能が未実装のため）
   - しかし、UIの改善により緑色のボタン/グレーの「-」で視覚的に分かりやすくなる

### 3. 将来的な動作確認（ファイルアップロード実装後）
1. 経費申請で領収書をアップロード
2. 申請管理画面で緑色の✓ボタンが表示される
3. ボタンをクリックして領収書画像が新しいタブで開く

## 現在の状況まとめ
- 📊 **データベース準備**：完了（マイグレーション実行後）
- 🎨 **UI改善**：完了（アップロード状態の視覚的表示）
- 🔧 **ファイルアップロード**：未実装（次の課題）

マイグレーション実行後は、少なくとも申請管理画面の表示が改善され、将来的にファイルアップロード機能を追加した際に適切に動作する基盤が整います。