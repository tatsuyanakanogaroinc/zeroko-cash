
> zeroko-cash-expense-system@0.1.0 dev
> next dev --turbopack

 âš  Port 3000 is in use by process 23344, using available port 3002 instead.
   â–² Next.js 15.4.5 (Turbopack)
   - Local:        http://localhost:3002
   - Network:      http://192.168.151.187:3002
   - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Ready in 998ms
 âš  Webpack is configured while Turbopack is not, which may cause problems.
 âš  See instructions if you need to configure Turbopack:
  https://nextjs.org/docs/app/api-reference/next-config-js/turbopack

 â—‹ Compiling /api/test/drive ...
 âœ“ Compiled /api/test/drive in 1762ms
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
Google Driveã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æº–å‚™: {
  fileName: 'test-1754577195901_ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼_2025-8-7_Google Drive.png',
  contentType: 'image/png',
  bufferSize: 70,
  expenseType: 'çµŒè²»ç”³è«‹'
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: TypeError: part.body.pipe is not a function
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:195:46)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  193 |
  194 |       // ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
> 195 |       const response = await this.drive.files.create({
      |                                              ^
  196 |         requestBody: {
  197 |           name: newFileName,
  198 |           parents: [expenseTypeFolderId]
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:215:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  213 |     } catch (error) {
  214 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 215 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  216 |     }
  217 |   }
  218 |
 GET /api/test/drive 500 in 4295ms
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
Google Driveã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æº–å‚™: {
  fileName: 'test-1754577222608_ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼_2025-8-7_Google Drive.png',
  contentType: 'image/png',
  bufferSize: 70,
  expenseType: 'çµŒè²»ç”³è«‹'
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: Error: Service Accounts do not have storage quota. Leverage shared drives (https://developers.google.com/workspace/drive/api/guides/about-shareddrives), or use OAuth delegation (http://support.google.com/a/answer/7281227) instead.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:201:23)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  199 |
  200 |       // ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
> 201 |       const response = await this.drive.files.create({
      |                       ^
  202 |         requestBody: {
  203 |           name: newFileName,
  204 |           parents: [expenseTypeFolderId] {
  config: [Object],
  response: [Response],
  code: 403,
  status: 403,
  error: undefined,
  [cause]: [Object]
}
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:221:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  219 |     } catch (error) {
  220 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 221 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  222 |     }
  223 |   }
  224 |
 GET /api/test/drive 500 in 4591ms
   Reload env: .env.local
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
Google Driveã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æº–å‚™: {
  fileName: 'test-1754577525252_ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼_2025-8-7_Google Drive.png',
  contentType: 'image/png',
  bufferSize: 70,
  expenseType: 'çµŒè²»ç”³è«‹'
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: Error: Service Accounts do not have storage quota. Leverage shared drives (https://developers.google.com/workspace/drive/api/guides/about-shareddrives), or use OAuth delegation (http://support.google.com/a/answer/7281227) instead.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:210:23)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  208 |
  209 |       // ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
> 210 |       const response = await this.drive.files.create({
      |                       ^
  211 |         requestBody: {
  212 |           name: newFileName,
  213 |           parents: [expenseTypeFolderId] {
  config: [Object],
  response: [Response],
  code: 403,
  status: 403,
  error: undefined,
  [cause]: [Object]
}
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:231:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  229 |     } catch (error) {
  230 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 231 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  232 |     }
  233 |   }
  234 |
 GET /api/test/drive 500 in 4237ms
   Reload env: .env.local
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
å¹´ãƒ•ã‚©ãƒ«ãƒ€ "2025" ã®å–å¾—/ä½œæˆã‚¨ãƒ©ãƒ¼: Error: File not found: 1Qi7pQShhYhGzvQQ30f_NgGq8mshwyQfy.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.getOrCreateYearFolder (src/lib/google-drive.ts:89:29)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:187:27)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  87 |
  88 |       // å¹´ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
> 89 |       const createResponse = await this.drive.files.create({
     |                             ^
  90 |         requestBody: {
  91 |           name: year,
  92 |           mimeType: 'application/vnd.google-apps.folder', {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: Error: File not found: 1Qi7pQShhYhGzvQQ30f_NgGq8mshwyQfy.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.getOrCreateYearFolder (src/lib/google-drive.ts:89:29)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:187:27)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  87 |
  88 |       // å¹´ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
> 89 |       const createResponse = await this.drive.files.create({
     |                             ^
  90 |         requestBody: {
  91 |           name: year,
  92 |           mimeType: 'application/vnd.google-apps.folder', {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:231:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  229 |     } catch (error) {
  230 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 231 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  232 |     }
  233 |   }
  234 |
 GET /api/test/drive 500 in 2064ms
   Reload env: .env.local
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
å¹´ãƒ•ã‚©ãƒ«ãƒ€ "2025" ã®å–å¾—/ä½œæˆã‚¨ãƒ©ãƒ¼: Error: File not found: 1Qi7pQShhYhGzvQQ30f_NgGq8mshwyQfy.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.getOrCreateYearFolder (src/lib/google-drive.ts:89:29)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:187:27)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  87 |
  88 |       // å¹´ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
> 89 |       const createResponse = await this.drive.files.create({
     |                             ^
  90 |         requestBody: {
  91 |           name: year,
  92 |           mimeType: 'application/vnd.google-apps.folder', {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: Error: File not found: 1Qi7pQShhYhGzvQQ30f_NgGq8mshwyQfy.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.getOrCreateYearFolder (src/lib/google-drive.ts:89:29)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:187:27)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  87 |
  88 |       // å¹´ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
> 89 |       const createResponse = await this.drive.files.create({
     |                             ^
  90 |         requestBody: {
  91 |           name: year,
  92 |           mimeType: 'application/vnd.google-apps.folder', {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:231:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  229 |     } catch (error) {
  230 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 231 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  232 |     }
  233 |   }
  234 |
 GET /api/test/drive 500 in 1715ms
   Reload env: .env.local
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
Google Driveã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æº–å‚™: {
  fileName: 'test-1755392527156_ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼_2025-8-17_Google Drive.png',
  contentType: 'image/png',
  bufferSize: 70,
  expenseType: 'çµŒè²»ç”³è«‹'
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: Error: Service Accounts do not have storage quota. Leverage shared drives (https://developers.google.com/workspace/drive/api/guides/about-shareddrives), or use OAuth delegation (http://support.google.com/a/answer/7281227) instead.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:210:23)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  208 |
  209 |       // ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
> 210 |       const response = await this.drive.files.create({
      |                       ^
  211 |         requestBody: {
  212 |           name: newFileName,
  213 |           parents: [expenseTypeFolderId] {
  config: [Object],
  response: [Response],
  code: 403,
  status: 403,
  error: undefined,
  [cause]: [Object]
}
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:231:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  229 |     } catch (error) {
  230 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 231 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  232 |     }
  233 |   }
  234 |
 GET /api/test/drive 500 in 4807ms
   Reload env: .env.local
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
å¹´ãƒ•ã‚©ãƒ«ãƒ€ "2025" ã®å–å¾—/ä½œæˆã‚¨ãƒ©ãƒ¼: Error: File not found: 0AJ883RBiVMkQUk9PVA.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.getOrCreateYearFolder (src/lib/google-drive.ts:89:29)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:187:27)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  87 |
  88 |       // å¹´ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
> 89 |       const createResponse = await this.drive.files.create({
     |                             ^
  90 |         requestBody: {
  91 |           name: year,
  92 |           mimeType: 'application/vnd.google-apps.folder', {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼: Error: File not found: 0AJ883RBiVMkQUk9PVA.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleDriveService.getOrCreateYearFolder (src/lib/google-drive.ts:89:29)
    at async GoogleDriveService.uploadImage (src/lib/google-drive.ts:187:27)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  87 |
  88 |       // å¹´ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
> 89 |       const createResponse = await this.drive.files.create({
     |                             ^
  90 |         requestBody: {
  91 |           name: year,
  92 |           mimeType: 'application/vnd.google-apps.folder', {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
âŒ Google Driveãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ
    at GoogleDriveService.uploadImage (src/lib/google-drive.ts:231:12)
    at async GET (src/app/api/test/drive/route.ts:25:19)
  229 |     } catch (error) {
  230 |       console.error('Google Driveã¸ã®ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
> 231 |       throw new Error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
      |            ^
  232 |     }
  233 |   }
  234 |
 GET /api/test/drive 500 in 1629ms
 âœ“ Compiled /api/test/drive-list in 309ms
ğŸ§ª Google Driveå…±æœ‰ãƒ‰ãƒ©ã‚¤ãƒ–å†…å®¹ç¢ºèªãƒ†ã‚¹ãƒˆé–‹å§‹
ğŸ“ Google Drive ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ :
 GET /api/test/drive-list 200 in 1283ms
 âœ“ Compiled /api/test/drive-simple in 227ms
ğŸ§ª Google Driveç°¡å˜ãƒ†ã‚¹ãƒˆé–‹å§‹
âŒ Google Driveç°¡å˜ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: File not found: 0AJ883RBiVMkQUk9PVA.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GET (src/app/api/test/drive-simple/route.ts:36:21)
  34 |     stream.push(null);
  35 |     
> 36 |     const response = await drive.files.create({
     |                     ^
  37 |       requestBody: {
  38 |         name: `test-file-${Date.now()}.txt`,
  39 |         parents: [process.env.GOOGLE_DRIVE_ROOT_FOLDER_ID!] {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
 GET /api/test/drive-simple 500 in 1437ms
ğŸ§ª Google Driveç°¡å˜ãƒ†ã‚¹ãƒˆé–‹å§‹
âŒ Google Driveç°¡å˜ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: Error: File not found: 0AJ883RBiVMkQUk9PVA.
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GET (src/app/api/test/drive-simple/route.ts:36:21)
  34 |     stream.push(null);
  35 |     
> 36 |     const response = await drive.files.create({
     |                     ^
  37 |       requestBody: {
  38 |         name: `test-file-${Date.now()}.txt`,
  39 |         parents: [process.env.GOOGLE_DRIVE_ROOT_FOLDER_ID!] {
  config: [Object],
  response: [Response],
  code: 404,
  status: 404,
  error: undefined,
  [cause]: [Object]
}
 GET /api/test/drive-simple 500 in 1905ms
 âœ“ Compiled /api/test/drive-drives in 229ms
ğŸ§ª åˆ©ç”¨å¯èƒ½ãªå…±æœ‰ãƒ‰ãƒ©ã‚¤ãƒ–ä¸€è¦§å–å¾—ãƒ†ã‚¹ãƒˆé–‹å§‹
åˆ©ç”¨å¯èƒ½ãªå…±æœ‰ãƒ‰ãƒ©ã‚¤ãƒ–: []
 GET /api/test/drive-drives 200 in 1054ms
ğŸ§ª åˆ©ç”¨å¯èƒ½ãªå…±æœ‰ãƒ‰ãƒ©ã‚¤ãƒ–ä¸€è¦§å–å¾—ãƒ†ã‚¹ãƒˆé–‹å§‹
åˆ©ç”¨å¯èƒ½ãªå…±æœ‰ãƒ‰ãƒ©ã‚¤ãƒ–: [ { kind: 'drive#drive', id: '0AJ883RBiVMkQUk9PVA', name: 'ãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹' } ]
 GET /api/test/drive-drives 200 in 610ms
ğŸ§ª Google Driveç°¡å˜ãƒ†ã‚¹ãƒˆé–‹å§‹
âœ… ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæˆåŠŸ: {
  id: '12nM8_vrwkxu-zXocJEVSztZWeFf2H2wP',
  webViewLink: 'https://drive.google.com/file/d/12nM8_vrwkxu-zXocJEVSztZWeFf2H2wP/view?usp=drivesdk'
}
 GET /api/test/drive-simple 200 in 2993ms
ğŸ§ª Google DriveåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
å¹´ãƒ•ã‚©ãƒ«ãƒ€ "2025" ã‚’ä½œæˆã—ã¾ã—ãŸ
æœˆãƒ•ã‚©ãƒ«ãƒ€ "08æœˆ" ã‚’ä½œæˆã—ã¾ã—ãŸ
æ”¯å‡ºã‚¿ã‚¤ãƒ—ãƒ•ã‚©ãƒ«ãƒ€ "çµŒè²»ç”³è«‹" ã‚’ä½œæˆã—ã¾ã—ãŸ
Google Driveã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æº–å‚™: {
  fileName: 'test-1755477703561_ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼_2025-8-18_Google Drive.png',
  contentType: 'image/png',
  bufferSize: 70,
  expenseType: 'çµŒè²»ç”³è«‹'
}
ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ: test-1755477703561_ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼_2025-8-18_Google Drive.png -> ãƒ•ã‚©ãƒ«ãƒ€: 2025/08æœˆ/çµŒè²»ç”³è«‹
 GET /api/test/drive 200 in 14365ms
 âœ“ Compiled /api/test/sync in 299ms
ğŸ§ª Google SheetsåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
âœ… Google Sheetsã‚µãƒ¼ãƒ“ã‚¹åˆæœŸåŒ–æˆåŠŸ
ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®çµ±åˆæ”¯å‡ºãƒ‡ãƒ¼ã‚¿è¿½åŠ ã‚¨ãƒ©ãƒ¼: Error: The caller does not have permission
    at Gaxios._request (../../../src/gaxios.ts:211:14)
    at async GoogleSheetsService.addUnifiedExpenseToSheet (src/lib/google-sheets.ts:107:6)
    at async GET (src/app/api/test/sync/route.ts:46:6)
  105 |       };
  106 |
> 107 |       await this.sheets.spreadsheets.values.append(request);
      |      ^
  108 |       console.log('çµ±åˆæ”¯å‡ºãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ:', expenseData.id, expenseData.æ”¯å‡ºã‚¿ã‚¤ãƒ—);
  109 |       return true;
  110 |     } catch (error) { {
  config: [Object],
  response: [Response],
  code: 403,
  status: 403,
  error: undefined,
  [cause]: [Object]
}
âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ›¸ãè¾¼ã¿æˆåŠŸ
 GET /api/test/sync 200 in 1652ms
   Reload env: .env.local
ğŸ§ª Google SheetsåŒæœŸãƒ†ã‚¹ãƒˆé–‹å§‹
âœ… Google Sheetsã‚µãƒ¼ãƒ“ã‚¹åˆæœŸåŒ–æˆåŠŸ
çµ±åˆæ”¯å‡ºãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ: test-1755477816163 ãƒ†ã‚¹ãƒˆç”³è«‹
âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æ›¸ãè¾¼ã¿æˆåŠŸ
 GET /api/test/sync 200 in 2310ms
 âœ“ Compiled /api/export/csv in 141ms
 GET /api/export/csv?type=unified 200 in 815ms
 GET /api/export/csv?type=expenses 200 in 284ms
 âœ“ Compiled /api/applications in 137ms
ç”³è«‹ãƒ‡ãƒ¼ã‚¿API: ãƒ‡ãƒ¼ã‚¿å–å¾—é–‹å§‹
APIçµŒè²»ãƒ‡ãƒ¼ã‚¿: { count: 13, error: null }
APIè«‹æ±‚æ›¸ãƒ‡ãƒ¼ã‚¿: { count: 1, error: null }
APIçµ±åˆãƒ‡ãƒ¼ã‚¿: 14 ä»¶
 GET /api/applications 200 in 731ms
 âœ“ Compiled /api/applications/[id]/approve in 261ms
Error: Route "/api/applications/[id]/approve" used `params.id`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (src/app/api/applications/[id]/approve/route.ts:24:12)
  22 | ) {
  23 |   try {
> 24 |     const { id } = params;
     |            ^
  25 |     const body = await request.json();
  26 |     const { action, comments, type, userId } = body;
  27 |
æ‰¿èªAPIé–‹å§‹: {
  id: '87594bef-1fc1-46de-8672-555383568d3f',
  action: 'approve',
  comments: 'æ‰¿èªãƒ†ã‚¹ãƒˆ - Google Sheetsè‡ªå‹•åŒæœŸç¢ºèª',
  type: 'expense',
  userId: '501122a3-fc11-4817-9872-db0b2da7201b'
}
ãƒ†ãƒ¼ãƒ–ãƒ«å: expenses ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: approved
ç”³è«‹æ¤œç´¢çµæœ: {
  application: { id: '87594bef-1fc1-46de-8672-555383568d3f', status: 'pending' },
  fetchError: null
}
æ›´æ–°ãƒ‡ãƒ¼ã‚¿: { status: 'approved', comments: 'æ‰¿èªãƒ†ã‚¹ãƒˆ - Google Sheetsè‡ªå‹•åŒæœŸç¢ºèª' }
æ›´æ–°çµæœ: { updateError: null }
çµ±åˆæ”¯å‡ºãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ: 87594bef-1fc1-46de-8672-555383568d3f çµŒè²»ç”³è«‹
Google Sheetsã¸ã®åŒæœŸãŒå®Œäº†ã—ã¾ã—ãŸ
ç”³è«‹ 87594bef-1fc1-46de-8672-555383568d3f ã«ã¯é ˜åæ›¸ç”»åƒãŒã‚ã‚Šã¾ã›ã‚“ã€‚Google DriveåŒæœŸã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚
Google Driveã¸ã®ç”»åƒåŒæœŸãŒå®Œäº†ã—ã¾ã—ãŸ
 POST /api/applications/87594bef-1fc1-46de-8672-555383568d3f/approve 200 in 4178ms
